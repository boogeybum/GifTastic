<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GifTastic Movie Quotes</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-sm">
                <h1>GifTastic Movie Quotes</h1>
            </div>
        </div>
    </div>
    <br>
    <div class="container">
        <div class="row">
            <div id="btn-view" class="col-sm-8">
                <!-- <button data-movie="Star Wars">Star Wars</button> -->
            </div>
            <div class="col-sm-4">
                <form id="gifSearch-form">
                    <label for="gifSearch-input">Add a Movie to Quote</label>
                    <input type="text" id="gifSearch-input">
                    <!-- <br> -->
                    <input id="add-movie" type="submit" value="Update Buttons" class="btn btn-primary">
                </form>
            </div>
        </div>
    </div>
    <br>
    <div class="container">
        <div class="row">
            <div id="giftastic" class="col-sm">
                
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script>
        var topics = ["Tommy Boy", "Holy Grail", "Caddyshack", "Happy Gilmore"];

        // update click and search buttons on page from topics array
        function renderButtons() {
        // clear buttons on the page before appending new to prevent adding same button twice
            $("#btn-view").empty();
    
            // run the array to add a button and text for each item in the array
            for (var i = 0; i < topics.length; i++) {
                var newBtn = $("<button>");
                newBtn.addClass("btn btn-primary");
                newBtn.attr("data-movie", topics[i]);
                newBtn.text(topics[i]);
                $("#btn-view").append(newBtn);
                // console.log(newBtn);
            }
        };

        renderButtons();

        $("button").on("click", function() {
        var movieGif = $("button").attr("data-movie");
        console.log(movieGif);
        // link to giphy api
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
        movieGif + "&api_key=TD2V1oeol0vQTK3C0op1DCFEbEknqsRW&limit=5";

        $.ajax({
            url: queryURL,
            method: "GET"
            }).then(function(response) {
                var results = response.data;

                for (var i = 0; i < results.length; i++) {
                    if (results[i].rating !== "r" && results[i].rating !== "pg-13") {
                        var gifDiv = $("<div>");

                        var rating = results[i].rating;
                        var p = $("<p>").text("Rating: " + rating);
                        var gifImage = $("<img>");
                        gifImage.attr("src", results[i].images.fixed_height.url);
                        gifDiv.append(gifImage);
                        gifDiv.append(p);
                        $("#giftastic").prepend(gifDiv);
                    }
                }
            });
        });

        $("#add-movie").on("click", function(event) {
            event.preventDefault();

            var movie = $("#gifSearch-input").val().trim();
            topics.push(movie);
            renderButtons();
            //clear the search field 
            $("#gifSearch-input").val("");
        });

        
    </script> -->

    <script src="assets/javascript/app.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>